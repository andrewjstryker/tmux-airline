version: "3.3"
services:
  no-tmux:
    image: bats/bats:latest
    environment:
      BASE_DIR: /code
    volumes:
      - "$PWD:/code/"
    command: /code/tests/no-tmux.bats
  tmux:
    image: andrewjstryker/tmux-ci-testing:1.0.0
    build:
      context: .
      dockerfile: tests/tmux-ci-testing.dockerfile
    environment:
      PLUGIN_HOME: /home/status/.tmux/plugins/tmux-status
    volumes:
      - "$PWD:/home/status/.tmux/plugins/tmux-status"
    command: bats "/home/status/.tmux/plugins/tmux-status/tests"
